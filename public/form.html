<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>디맨드 근무 후기 이벤트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Netlify Forms를 위한 실제 폼 -->
    <form name="demand-review-form" method="POST" data-netlify="true" enctype="multipart/form-data" class="hidden">
        <input type="text" name="name" />
        <input type="email" name="email" />
        <input type="tel" name="phone" />
        <input type="text" name="source" />
        <input type="text" name="education" />
        <input type="text" name="company" />
        <input type="text" name="address" />
        <input type="text" name="job-category" />
        <input type="text" name="job-subcategory" />
        <input type="text" name="work-period" />
        <input type="file" name="proof-file" />
        <input type="text" name="근무환경시설-rating" />
        <textarea name="근무환경시설-review"></textarea>
        <input type="text" name="근무강도스트레스-rating" />
        <textarea name="근무강도스트레스-review"></textarea>
        <input type="text" name="급여복지-rating" />
        <textarea name="급여복지-review"></textarea>
        <input type="text" name="안정성전망-rating" />
        <textarea name="안정성전망-review"></textarea>
        <input type="text" name="사람들-rating" />
        <textarea name="사람들-review"></textarea>
        <input type="text" name="취업준비-rating" />
        <textarea name="취업준비-review"></textarea>
        <input type="text" name="면접준비-rating" />
        <textarea name="면접준비-review"></textarea>
        <textarea name="한마디-review"></textarea>
        <input type="text" name="submitted-at" />
    </form>

    <div id="app" class="min-h-screen py-12 px-4">
        <div class="max-w-2xl mx-auto">
            <!-- 제출 완료 페이지 -->
            <div id="success-page" class="hidden">
                <div class="bg-white rounded-lg shadow-md p-8 text-center">
                    <div class="mx-auto h-16 w-16 text-green-500 mb-4">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <h1 class="text-2xl font-semibold mb-4">제출이 완료되었습니다!</h1>
                    <p class="text-gray-600 mb-6">
                        소중한 후기를 작성해주셔서 감사합니다.<br>
                        검토 후 이벤트 보상에 대해 안내드리겠습니다.
                    </p>
                    <button onclick="location.reload()" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                        새로운 후기 작성하기
                    </button>
                </div>
            </div>

            <!-- 메인 폼 -->
            <div id="main-form">
                <!-- Page 1 -->
                <div id="page-1" class="bg-white rounded-lg shadow-md p-8">
                    <h1 class="text-2xl font-semibold text-center mb-4">근무 후기 이벤트 참여</h1>
                    
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                        <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: 33.33%"></div>
                    </div>
                    
                    <div class="text-center text-gray-600 mb-8">1 / 3</div>

                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">이름 *</label>
                            <input type="text" id="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">이메일 *</label>
                            <input type="email" id="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">전화번호 *</label>
                            <input type="tel" id="phone" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">어떤 경로로 후기 이벤트를 접하게 되었나요? *</label>
                            <select id="source" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">선택해주세요</option>
                                <option value="디맨드 홈페이지">디맨드 홈페이지</option>
                                <option value="디맨드 인스타그램">디맨드 인스타그램</option>
                                <option value="디맨드 스레드">디맨드 스레드</option>
                                <option value="디맨드 오픈채팅방">디맨드 오픈채팅방</option>
                                <option value="인스타그램 광고">인스타그램 광고</option>
                                <option value="디맨드 블로그">디맨드 블로그</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">최종학력 *</label>
                            <select id="education" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">선택해주세요</option>
                                <option value="고졸">고졸</option>
                                <option value="초대졸">초대졸</option>
                                <option value="대졸">대졸</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">회사명(근무지명) *</label>
                            <input type="text" id="company" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p class="text-sm text-gray-600 mt-1">가능한 줄임 없이 풀어서 써주세요 (하닉 → SK하이닉스)</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">사업장 주소 *</label>
                            <div class="flex gap-2 mb-2">
                                <input type="text" id="postcode" placeholder="우편번호" readonly required class="flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50">
                                <button type="button" onclick="execDaumPostcode()" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">주소 찾기</button>
                            </div>
                            <input type="text" id="roadAddress" placeholder="도로명 주소" readonly required class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 mb-2">
                            <input type="text" id="detailAddress" placeholder="상세주소 입력" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">직무 (대분류) *</label>
                            <select id="jobCategory" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">선택해주세요</option>
                                <option value="서비스업">서비스업</option>
                                <option value="금융·은행업">금융·은행업</option>
                                <option value="건설업">건설업</option>
                                <option value="의료·제약업">의료·제약업</option>
                                <option value="미디어·광고업">미디어·광고업</option>
                                <option value="문화·예술·디자인업">문화·예술·디자인업</option>
                                <option value="IT·정보통신업">IT·정보통신업</option>
                                <option value="기관·협회">기관·협회</option>
                                <option value="제조·생산·화학업">제조·생산·화학업</option>
                                <option value="판매·유통업">판매·유통업</option>
                                <option value="교육업">교육업</option>
                                <option value="기획·전략">기획·전략</option>
                                <option value="법무·사무·총무">법무·사무·총무</option>
                                <option value="인사·HR">인사·HR</option>
                                <option value="회계·세무">회계·세무</option>
                                <option value="마케팅·광고·MD">마케팅·광고·MD</option>
                                <option value="개발·데이터">개발·데이터</option>
                                <option value="디자인">디자인</option>
                                <option value="물류·무역">물류·무역</option>
                                <option value="운전·운송·배송">운전·운송·배송</option>
                                <option value="영업">영업</option>
                                <option value="고객상담·TM">고객상담·TM</option>
                                <option value="금융·보험">금융·보험</option>
                                <option value="식·음료">식·음료</option>
                                <option value="고객서비스·리테일">고객서비스·리테일</option>
                                <option value="엔지니어링·설계">엔지니어링·설계</option>
                                <option value="제조·생산">제조·생산</option>
                                <option value="교육">교육</option>
                                <option value="건축·시설">건축·시설</option>
                                <option value="의료·바이오">의료·바이오</option>
                                <option value="미디어·문화·스포츠">미디어·문화·스포츠</option>
                                <option value="공공·복지">공공·복지</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">직무 (소분류) *</label>
                            <input type="text" id="jobSubCategory" required placeholder="상세 직무를 입력해주세요" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">근무 기간 *</label>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm text-gray-600 mb-1">시작일</label>
                                    <div class="flex gap-2">
                                        <select id="workStartYear" required class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">년도</option>
                                            <option value="2024">2024년</option>
                                            <option value="2023">2023년</option>
                                            <option value="2022">2022년</option>
                                            <option value="2021">2021년</option>
                                            <option value="2020">2020년</option>
                                            <option value="2019">2019년</option>
                                            <option value="2018">2018년</option>
                                            <option value="2017">2017년</option>
                                            <option value="2016">2016년</option>
                                            <option value="2015">2015년</option>
                                            <option value="2014">2014년</option>
                                            <option value="2013">2013년</option>
                                            <option value="2012">2012년</option>
                                            <option value="2011">2011년</option>
                                            <option value="2010">2010년</option>
                                        </select>
                                        <select id="workStartMonth" required class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">월</option>
                                            <option value="1">1월</option>
                                            <option value="2">2월</option>
                                            <option value="3">3월</option>
                                            <option value="4">4월</option>
                                            <option value="5">5월</option>
                                            <option value="6">6월</option>
                                            <option value="7">7월</option>
                                            <option value="8">8월</option>
                                            <option value="9">9월</option>
                                            <option value="10">10월</option>
                                            <option value="11">11월</option>
                                            <option value="12">12월</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" id="currentJob" class="rounded">
                                    <label for="currentJob" class="text-sm">현재 재직중</label>
                                </div>

                                <div id="endDateSection" class="hidden">
                                    <label class="block text-sm text-gray-600 mb-1">종료일</label>
                                    <div class="flex gap-2">
                                        <select id="workEndYear" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">년도</option>
                                            <option value="2024">2024년</option>
                                            <option value="2023">2023년</option>
                                            <option value="2022">2022년</option>
                                            <option value="2021">2021년</option>
                                            <option value="2020">2020년</option>
                                            <option value="2019">2019년</option>
                                            <option value="2018">2018년</option>
                                            <option value="2017">2017년</option>
                                            <option value="2016">2016년</option>
                                            <option value="2015">2015년</option>
                                            <option value="2014">2014년</option>
                                            <option value="2013">2013년</option>
                                            <option value="2012">2012년</option>
                                            <option value="2011">2011년</option>
                                            <option value="2010">2010년</option>
                                        </select>
                                        <select id="workEndMonth" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="">월</option>
                                            <option value="1">1월</option>
                                            <option value="2">2월</option>
                                            <option value="3">3월</option>
                                            <option value="4">4월</option>
                                            <option value="5">5월</option>
                                            <option value="6">6월</option>
                                            <option value="7">7월</option>
                                            <option value="8">8월</option>
                                            <option value="9">9월</option>
                                            <option value="10">10월</option>
                                            <option value="11">11월</option>
                                            <option value="12">12월</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center space-x-2">
                            <input type="checkbox" id="privacy" required class="rounded">
                            <label for="privacy" class="text-sm">개인정보 수집 및 활용에 동의합니다. (개인정보는 수집만 하고 어디에 노출되지 않습니다)</label>
                        </div>

                        <div id="error-message" class="hidden bg-red-50 border border-red-200 rounded-md p-4">
                            <div class="flex">
                                <div class="text-red-400">⚠️</div>
                                <div class="ml-3">
                                    <p id="error-text" class="text-sm text-red-800"></p>
                                </div>
                            </div>
                        </div>

                        <button type="button" onclick="nextPage(2)" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">
                            다음 (1/3)
                        </button>
                    </div>
                </div>

                <!-- Page 2 -->
                <div id="page-2" class="hidden bg-white rounded-lg shadow-md p-8">
                    <h1 class="text-2xl font-semibold text-center mb-4">현직자 인증</h1>
                    
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                        <div class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: 66.66%"></div>
                    </div>
                    
                    <div class="text-center text-gray-600 mb-8">2 / 3</div>

                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">증빙 자료를 첨부해주세요.</label>
                            <p class="text-sm text-gray-600 mt-1 mb-4">
                                증빙이 인증되면 이벤트 보상 제공 대상에 자동으로 포함됩니다. 하지만, 증빙 자료가 첨부되지 않았더라도
                                근무했다는 사실이 리뷰를 통해 충분히 인정되면 이벤트 보상 제공 대상에 포함될 수 있습니다.
                            </p>

                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50">
                                <div class="mx-auto h-12 w-12 text-gray-400 mb-4">
                                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                </div>
                                <p class="text-gray-600 mb-2">사원증, 사내 시스템 화면 등</p>
                                <p class="text-sm text-gray-500 mb-4">이미지 또는 PDF 파일, 15일 이내 자동 삭제됩니다</p>
                                <input type="file" id="proofFile" accept="image/*,application/pdf" class="max-w-xs mx-auto">
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button type="button" onclick="showPage(1)" class="flex-1 border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-50">
                                이전
                            </button>
                            <button type="button" onclick="nextPage(3)" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">
                                다음 (2/3)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Page 3 -->
                <div id="page-3" class="hidden bg-white rounded-lg shadow-md p-8">
                    <h1 class="text-2xl font-semibold text-center mb-4">현직자 상세 리뷰</h1>
                    
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                        <div class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: 100%"></div>
                    </div>
                    
                    <div class="text-center text-gray-600 mb-8">3 / 3</div>

                    <div class="space-y-8">
                        <!-- 근무환경/시설 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">1. 근무환경/시설</label>
                                <p class="text-sm text-gray-600 mt-1">사무실 환경, 편의 시설, 장비의 품질 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">평점 평가</label>
                                <select id="rating1" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">평점을 선택해주세요</option>
                                    <option value="5">★★★★★ 5점 (매우 좋음)</option>
                                    <option value="4">★★★★☆ 4점 (좋음)</option>
                                    <option value="3">★★★☆☆ 3점 (보통)</option>
                                    <option value="2">★★☆☆☆ 2점 (나쁨)</option>
                                    <option value="1">★☆☆☆☆ 1점 (매우 나쁨)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review1" rows="6" placeholder="사무실이 깔끔하고 쾌적한 편인지, 편의시설 이용이 편리한지, 장비나 기기들이 최신인지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count1">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error1" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 근무강도/스트레스 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">2. 근무강도/스트레스</label>
                                <p class="text-sm text-gray-600 mt-1">업무량, 야근 빈도, 스트레스 정도 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">평점 평가</label>
                                <select id="rating2" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">평점을 선택해주세요</option>
                                    <option value="5">★★★★★ 5점 (매우 좋음)</option>
                                    <option value="4">★★★★☆ 4점 (좋음)</option>
                                    <option value="3">★★★☆☆ 3점 (보통)</option>
                                    <option value="2">★★☆☆☆ 2점 (나쁨)</option>
                                    <option value="1">★☆☆☆☆ 1점 (매우 나쁨)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review2" rows="6" placeholder="업무량이 적당한지 과도한지, 야근 빈도는 어떤지, 업무 스트레스가 어느 정도인지, 휴가 사용이 자유로운지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count2">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error2" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 급여/복지 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">3. 급여/복지</label>
                                <p class="text-sm text-gray-600 mt-1">급여 수준, 복리후생, 인센티브 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">평점 평가</label>
                                <select id="rating3" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">평점을 선택해주세요</option>
                                    <option value="5">★★★★★ 5점 (매우 좋음)</option>
                                    <option value="4">★★★★☆ 4점 (좋음)</option>
                                    <option value="3">★★★☆☆ 3점 (보통)</option>
                                    <option value="2">★★☆☆☆ 2점 (나쁨)</option>
                                    <option value="1">★☆☆☆☆ 1점 (매우 나쁨)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review3" rows="6" placeholder="급여가 업계 평균과 비교해 어떤지, 복리후생은 어떤 것들이 있는지, 인센티브나 성과급은 어떤지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count3">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error3" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 안정성/전망 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">4. 안정성/전망</label>
                                <p class="text-sm text-gray-600 mt-1">회사 안정성, 성장성, 발전 가능성 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">평점 평가</label>
                                <select id="rating4" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">평점을 선택해주세요</option>
                                    <option value="5">★★★★★ 5점 (매우 좋음)</option>
                                    <option value="4">★★★★☆ 4점 (좋음)</option>
                                    <option value="3">★★★☆☆ 3점 (보통)</option>
                                    <option value="2">★★☆☆☆ 2점 (나쁨)</option>
                                    <option value="1">★☆☆☆☆ 1점 (매우 나쁨)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review4" rows="6" placeholder="회사가 안정적으로 성장하고 있는지, 업계에서의 전망은 어떤지, 개인의 발전 가능성은 어떤지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count4">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error4" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 사람들 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">5. 사람들</label>
                                <p class="text-sm text-gray-600 mt-1">동료 관계, 상사, 회사 분위기 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">평점 평가</label>
                                <select id="rating5" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">평점을 선택해주세요</option>
                                    <option value="5">★★★★★ 5점 (매우 좋음)</option>
                                    <option value="4">★★★★☆ 4점 (좋음)</option>
                                    <option value="3">★★★☆☆ 3점 (보통)</option>
                                    <option value="2">★★☆☆☆ 2점 (나쁨)</option>
                                    <option value="1">★☆☆☆☆ 1점 (매우 나쁨)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review5" rows="6" placeholder="동료들과의 관계는 어떤지, 상사는 어떤 스타일인지, 전체적인 회사 분위기는 어떤지, 소통이 원활한지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count5">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error5" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 취업준비 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">6. 취업준비</label>
                                <p class="text-sm text-gray-600 mt-1">자격증, 스펙, 준비 과정의 난이도</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">난이도 평가</label>
                                <select id="rating6" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">난이도를 선택해주세요</option>
                                    <option value="1">쉬움</option>
                                    <option value="2">보통</option>
                                    <option value="3">어려움</option>
                                    <option value="4">매우 어려움</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review6" rows="6" placeholder="입사 시 필요한 자격증이나 스펙은 무엇인지, 어떤 준비를 해야 하는지, 준비 과정이 어려웠는지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count6">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error6" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 면접준비 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">7. 면접준비</label>
                                <p class="text-sm text-gray-600 mt-1">면접 과정, 질문 유형, 준비 방법 등</p>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">난이도 평가</label>
                                <select id="rating7" class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">난이도를 선택해주세요</option>
                                    <option value="1">쉬움</option>
                                    <option value="2">보통</option>
                                    <option value="3">어려움</option>
                                    <option value="4">매우 어려움</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review7" rows="6" placeholder="면접 과정은 몇 단계였는지, 어떤 질문들이 나왔는지, 면접 준비는 어떻게 했는지, 면접 분위기는 어땠는지 등에 대해 자세히 작성해 주세요..." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count7">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error7" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <!-- 한마디 -->
                        <div class="space-y-4 p-6 bg-gray-50 rounded-lg">
                            <div>
                                <label class="text-lg font-medium text-gray-900">8. 이 곳에서 일하게 될 사람들에게 한마디</label>
                            </div>
                            <div>
                                <label class="text-sm text-gray-600 font-medium">상세 리뷰 *</label>
                                <textarea id="review8" rows="6" placeholder="앞으로 이 회사에서 일하게 될 사람들에게 조언이나 당부하고 싶은 말, 미리 알아두면 좋을 정보들을 자유롭게 작성해 주세요. 회사 생활에 도움이 될 만한 실질적인 조언을 부탁드립니다." class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"></textarea>
                                <div class="flex justify-between items-center mt-2">
                                    <p class="text-xs text-gray-500"><span id="count8">0</span>/50자 이상, 공백 제외</p>
                                    <p id="error8" class="text-xs text-red-500"></p>
                                </div>
                            </div>
                        </div>

                        <div id="final-error-message" class="hidden bg-red-50 border border-red-200 rounded-md p-4">
                            <div class="flex">
                                <div class="text-red-400">⚠️</div>
                                <div class="ml-3">
                                    <p id="final-error-text" class="text-sm text-red-800 whitespace-pre-line"></p>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button type="button" onclick="showPage(2)" class="flex-1 border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-50">
                                이전
                            </button>
                            <button type="button" id="submit-btn" onclick="submitForm()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">
                                제출하기
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentPage = 1;
        let isSubmitting = false;

        // 페이지 표시 함수
        function showPage(pageNum) {
            document.getElementById('page-1').classList.add('hidden');
            document.getElementById('page-2').classList.add('hidden');
            document.getElementById('page-3').classList.add('hidden');
            document.getElementById(`page-${pageNum}`).classList.remove('hidden');
            currentPage = pageNum;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 다음 페이지로 이동
        function nextPage(pageNum) {
            if (pageNum === 2) {
                if (!validatePage1()) return;
            }
            showPage(pageNum);
        }

        // 1페이지 유효성 검사
        function validatePage1() {
            const requiredFields = [
                { id: 'name', label: '이름' },
                { id: 'email', label: '이메일' },
                { id: 'phone', label: '전화번호' },
                { id: 'source', label: '이벤트 접촉 경로' },
                { id: 'education', label: '최종학력' },
                { id: 'company', label: '회사명' },
                { id: 'postcode', label: '우편번호' },
                { id: 'roadAddress', label: '도로명 주소' },
                { id: 'detailAddress', label: '상세주소' },
                { id: 'jobCategory', label: '직무 대분류' },
                { id: 'jobSubCategory', label: '직무 소분류' },
                { id: 'workStartYear', label: '근무 시작 년도' },
                { id: 'workStartMonth', label: '근무 시작 월' }
            ];

            const currentJobChecked = document.getElementById('currentJob').checked;
            if (!currentJobChecked) {
                requiredFields.push(
                    { id: 'workEndYear', label: '근무 종료 년도' },
                    { id: 'workEndMonth', label: '근무 종료 월' }
                );
            }

            const missingFields = requiredFields.filter(field => {
                const element = document.getElementById(field.id);
                return !element.value || element.value === '';
            });

            const errorMessages = [];

            if (missingFields.length > 0) {
                errorMessages.push(`다음 항목을 입력해주세요: ${missingFields.map(f => f.label).join(', ')}`);
            }

            const email = document.getElementById('email').value;
            if (email && !validateEmail(email)) {
                errorMessages.push('이메일 형식이 올바르지 않습니다. (예: admin@example.com)');
            }

            const phone = document.getElementById('phone').value;
            if (phone && !validatePhone(phone)) {
                errorMessages.push('전화번호 형식이 올바르지 않습니다. (예: 010-0000-0000)');
            }

            if (!document.getElementById('privacy').checked) {
                errorMessages.push('개인정보 수집 및 활용에 동의해주세요.');
            }

            if (errorMessages.length > 0) {
                showError(errorMessages.join('\n'));
                return false;
            }

            hideError();
            return true;
        }

        // 이메일 유효성 검사
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // 전화번호 유효성 검사
        function validatePhone(phone) {
            const phoneRegex = /^010-\d{4}-\d{4}$/;
            return phoneRegex.test(phone);
        }

        // 에러 메시지 표시
        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            errorText.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        // 에러 메시지 숨기기
        function hideError() {
            document.getElementById('error-message').classList.add('hidden');
        }

        // 최종 에러 메시지 표시
        function showFinalError(message) {
            const errorDiv = document.getElementById('final-error-message');
            const errorText = document.getElementById('final-error-text');
            errorText.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        // 최종 에러 메시지 숨기기
        function hideFinalError() {
            document.getElementById('final-error-message').classList.add('hidden');
        }

        // 전화번호 자동 포맷팅
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            if (value.length >= 3) {
                value = value.slice(0, 3) + '-' + value.slice(3);
            }
            if (value.length >= 8) {
                value = value.slice(0, 8) + '-' + value.slice(8, 12);
            }
            e.target.value = value;
        });

        // 현재 재직중 체크박스 이벤트
        document.getElementById('currentJob').addEventListener('change', function(e) {
            const endDateSection = document.getElementById('endDateSection');
            if (e.target.checked) {
                endDateSection.classList.add('hidden');
                document.getElementById('workEndYear').value = '';
                document.getElementById('workEndMonth').value = '';
            } else {
                endDateSection.classList.remove('hidden');
            }
        });

        // 다음 주소 API
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    document.getElementById('postcode').value = data.zonecode;
                    document.getElementById('roadAddress').value = data.roadAddress;
                    setTimeout(() => {
                        document.getElementById('detailAddress').focus();
                    }, 100);
                }
            }).open();
        }

        // 리뷰 텍스트 카운터 설정
        for (let i = 1; i <= 8; i++) {
            const textarea = document.getElementById(`review${i}`);
            const counter = document.getElementById(`count${i}`);
            const error = document.getElementById(`error${i}`);
            
            textarea.addEventListener('input', function() {
                const count = this.value.replace(/\s/g, '').length;
                counter.textContent = count;
                
                if (count < 50) {
                    error.textContent = '최소 50자 이상 입력해주세요';
                } else {
                    error.textContent = '';
                }
            });
        }

        // 폼 제출
        function submitForm() {
            if (isSubmitting) return;

            // 리뷰 유효성 검사
            const reviews = [];
            const errorMessages = [];

            for (let i = 1; i <= 8; i++) {
                const reviewText = document.getElementById(`review${i}`).value;
                const rating = document.getElementById(`rating${i}`) ? document.getElementById(`rating${i}`).value : null;
                
                const cleanText = reviewText.replace(/\s/g, '');
                
                if (cleanText.length < 50) {
                    errorMessages.push(`${i}번 항목: 50자 이상 입력해주세요`);
                }
                
                if (rating !== null && !rating) {
                    const ratingType = i <= 5 ? '평점' : '난이도';
                    errorMessages.push(`${i}번 항목: ${ratingType}을 선택해주세요`);
                }
            }

            if (errorMessages.length > 0) {
                showFinalError(errorMessages.join('\n'));
                return;
            }

            hideFinalError();
            isSubmitting = true;
            document.getElementById('submit-btn').textContent = '제출 중...';
            document.getElementById('submit-btn').disabled = true;

            // 폼 데이터 준비
            const formData = new FormData();

            // 기본 정보
            formData.append('form-name', 'demand-review-form');
            formData.append('name', document.getElementById('name').value);
            formData.append('email', document.getElementById('email').value);
            formData.append('phone', document.getElementById('phone').value);
            formData.append('source', document.getElementById('source').value);
            formData.append('education', document.getElementById('education').value);
            formData.append('company', document.getElementById('company').value);
            
            const address = `${document.getElementById('postcode').value} ${document.getElementById('roadAddress').value} ${document.getElementById('detailAddress').value}`;
            formData.append('address', address);
            
            formData.append('job-category', document.getElementById('jobCategory').value);
            formData.append('job-subcategory', document.getElementById('jobSubCategory').value);
            
            const isCurrentJob = document.getElementById('currentJob').checked;
            const workPeriod = isCurrentJob 
                ? `${document.getElementById('workStartYear').value}년 ${document.getElementById('workStartMonth').value}월 ~ 현재`
                : `${document.getElementById('workStartYear').value}년 ${document.getElementById('workStartMonth').value}월 ~ ${document.getElementById('workEndYear').value}년 ${document.getElementById('workEndMonth').value}월`;
            formData.append('work-period', workPeriod);

            // 증빙 파일
            const proofFile = document.getElementById('proofFile').files[0];
            if (proofFile) {
                formData.append('proof-file', proofFile);
            }

            // 리뷰 데이터
            const reviewTitles = [
                '근무환경시설', '근무강도스트레스', '급여복지', '안정성전망', 
                '사람들', '취업준비', '면접준비', '한마디'
            ];

            reviewTitles.forEach((title, index) => {
                const i = index + 1;
                const rating = document.getElementById(`rating${i}`);
                if (rating && rating.value) {
                    formData.append(`${title}-rating`, rating.value);
                }
                formData.append(`${title}-review`, document.getElementById(`review${i}`).value);
            });

            // 제출 시간
            formData.append('submitted-at', new Date().toLocaleString('ko-KR'));

            // 디버깅: FormData 내용 확인
            console.log('FormData contents:');
            for (let [key, value] of formData.entries()) {
                console.log(key, value);
            }

            // Netlify Forms로 제출
            fetch('/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(formData).toString()
            })
            .then(response => {
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                
                if (response.ok) {
                    // 성공 페이지 표시
                    document.getElementById('main-form').classList.add('hidden');
                    document.getElementById('success-page').classList.remove('hidden');
                } else {
                    return response.text().then(text => {
                        console.error('Response text:', text);
                        throw new Error(`제출에 실패했습니다. Status: ${response.status}`);
                    });
                }
            })
            .catch(error => {
                console.error('Form submission error:', error);
                alert(`제출 중 오류가 발생했습니다: ${error.message}`);
                isSubmitting = false;
                document.getElementById('submit-btn').textContent = '제출하기';
                document.getElementById('submit-btn').disabled = false;
            });
        }
    </script>
</body>
</html>
